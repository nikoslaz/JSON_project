cmake_minimum_required(VERSION 3.19.2)

project(JSON_Project LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

include_directories(
    include
)

add_executable(JSON_Project
    src/main.cpp
    src/JSONlang.cpp
)

set_target_properties(JSON_Project PROPERTIES RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin")

# Custom command for "make run"
add_custom_target(run
    COMMAND ${CMAKE_COMMAND} --build ${CMAKE_BINARY_DIR} --target JSON_Project
    COMMAND "${CMAKE_BINARY_DIR}/bin/JSON_Project"
    DEPENDS JSON_Project
    WORKING_DIRECTORY "${CMAKE_BINARY_DIR}"
    COMMENT "Building and running the JSON_Project executable"
)